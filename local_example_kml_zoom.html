<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
    <head>
        <!-- See http://developer.yahoo.com/yui/grids/ for info on the grid layout -->
        <title>Local Timeline Example</title>
        <meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/>

        <!-- See http://developer.yahoo.com/yui/ for info on the reset, font and base css -->
        <link rel="stylesheet" href="http://yui.yahooapis.com/2.7.0/build/reset-fonts-grids/reset-fonts-grids.css" type="text/css">
        <link rel="stylesheet" type="text/css" href="http://yui.yahooapis.com/2.7.0/build/base/base-min.css"> 

        <!-- Load the Timeline library after reseting the fonts, etc -->
        <script src="http://static.simile.mit.edu/timeline/api-2.3.0/timeline-api.js?bundle=true" type="text/javascript"></script> 

        <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.2.6/jquery.min.js"  type="text/javascript"></script>
        
        <!-- Load the customisations required for the zoombar -->
        <script src="./timeline_zoom_overrides.js" type="text/javascript"></script>
        <script src="./TimelineBandZoomBar.js" type="text/javascript"></script>

        <link rel="stylesheet" href="local_example.css" type="text/css">
        <link rel="stylesheet" href="TimelineBandZoomBar.css" type="text/css">

         <script  type="text/javascript">        
            var tl;
            function onLoad() {
                var tl_el = document.getElementById("tl");
                var eventSource = new Timeline.DefaultEventSource();
            
                var theme1 = Timeline.ClassicTheme.create();
                theme1.autoWidth = false; 
                
                theme1.timeline_start = new Date(Date.UTC(600, 1,1));
                theme1.timeline_stop  = new Date(Date.UTC(1900, 1, 1));
                theme1.mouseWheel = 'zoom';
            
                var d = "Tue Sep 13 1644 13:00:00 GMT-0000"
                var greatestMag = new Object();
                greatestMag.pixelsPerInterval = 330;
                greatestMag.unit = Timeline.DateTime.DECADE;
                var leastMag = new Object();
                leastMag.pixelsPerInterval = 85;
                leastMag.unit = Timeline.DateTime.CENTURY;
                var theZoomSteps = initZoomSteps(12, greatestMag, leastMag);
                var theZoomIndex = 5;
                var theIntervalUnit = theZoomSteps[theZoomIndex].unit;
                var theIntervalPixels = theZoomSteps[theZoomIndex].pixelsPerInterval;

                var bandInfos = [
                    Timeline.createBandInfo({
                        width:          300, // set to a minimum, autoWidth will then adjust
                        intervalUnit:   theIntervalUnit, 
                        intervalPixels: theIntervalPixels,
                        eventSource:    eventSource,
                        date:           d,
                        theme:          theme1,
                        layout:         'original',  // original, overview, detailed
                        zoomIndex:      theZoomIndex,
                        zoomSteps:      theZoomSteps
                    })
                ];
                                                            
                tl = Timeline.create(tl_el, bandInfos, Timeline.HORIZONTAL);
                tl.loadXML("battles.xml", function(xml, url) { eventSource.loadXML(xml, url); });
                var url = '.'; // The base url for image, icon and background image
 
                var tlZoomBar = new TimelineBandZoomBar(tl, 0);
                tl.ZoomBar = tlZoomBar;
                tl.layout(); // display the Timeline
                tl.finishedEventLoading();     
            }
        
            var resizeTimerID = null;
            function onResize() {
                if (resizeTimerID == null) {
                    resizeTimerID = window.setTimeout(function() {
                        resizeTimerID = null;
                        tl.layout();
                    }, 500);
                }
            }
        </script>
    </head>
    <body onload="onLoad();" onresize="onResize();">
        <div id="doc3" class="yui-t7">
            <div id="hd" role="banner">
                <h1>Local Timeline with Zoombar Example</h1>
                <p>Adaptation of the local timeline example to add a horizontal zoombar.
                    This example reads a local data file from the disk and displays it using the Simile Timeline library. The software library is retrieved from servers via the Internet.</p>
                <p>The Timeline is of fixed size but zoom out will show more events. Click on an event to see its details.</p>
            </div>
            <div id="bd" role="main"> 
                <div class="yui-g"> 
                    <div id='tl' style="height:300px;"></div>
                    <p>To move the Timeline: use the mouse scroll wheel, the arrow keys or grab and drag the Timeline.</p>
                </div>
            </div> 
            <div id="ft" role="contentinfo">
                <p>Thanks to the <a href=''>Simile Timeline project</a> Timeline version <span id='tl_ver'></span></p>
                <script type="text/javascript">Timeline.writeVersion('tl_ver')</script> 
            </div>
        </div>
    </body>
</html>
